# 🏪 STM32/ESP 기반 가게 관리 시스템 자동화 (Smart Store Automation)

## 📝 프로젝트 배경 (Project Background)

매장의 운영에서 가장 중요한 것은 **쾌적한 환경 유지와 효율적인 에너지 관리**입니다.  
하지만 소규모 매장의 경우 직원이 상주하지 않는 시간대에도 **조명, 환풍기, 자동문 등을 수동으로 관리**해야 하는 불편함이 존재합니다.  
이 프로젝트는 이러한 문제를 해결하기 위해, **센서를 통한 자동 감지 + 서버 연동을 통한 원격 제어 기능**을 갖춘 스마트 매장 관리 시스템을 구현하는 것을 목표로 합니다.  

---

## ✨ 주요 기능 (Key Features)

### 📡 실시간 센서 모니터링
- DHT11 센서로 매장 내부 온도·습도 실시간 측정  
- IR/초음파 센서로 출입 인원 감지 및 손님 수 카운트  

### 💡 자동 제어 기능
- 온도 값에 따른 팬(PWM) 속도 자동 조절  
- 손님 입출입 시 자동문 개방 및 조명 점등  
- LED 밝기 원격 제어 가능  

### 🌐 네트워크 통신 (ESP8266)
- Wi-Fi 모듈을 통한 서버와의 TCP/IP 통신  
- `[매장ID]명령어@값` 형식의 커스텀 프로토콜 기반 데이터 송수신  

### 🖥 서버/클라이언트 관리
- **서버 (store_server)**: 다중 매장 인증 및 상태 관리, 제어 명령 전송  
- **클라이언트 (smart_store_arduino)**: TCP ↔ Bluetooth 연동, 매장 장치 제어  

---

## 💡 문제 해결 (Troubleshooting)

- **문제점**: 단순히 센서 값만 읽으면 불필요한 오작동 발생 (예: 바람/조명 변화로 인한 잘못된 감지)  
  **해결책**: 일정 시간 동안 센서 값을 평균·검증하여 안정적인 데이터 기반 제어 수행  

- **문제점**: 매장 상태 확인을 위해 항상 현장에 있어야 함  
  **해결책**: Wi-Fi 모듈을 통해 서버와 연동, 원격에서 실시간으로 매장 상태 조회 및 제어 가능  

---

## 🛠️ 기술 스택 (Tech Stack)

- **임베디드 MCU**: STM32F4 (STM32CubeIDE, HAL Driver)  
- **네트워크 모듈**: ESP8266 (AT Command, TCP/IP)  
- **센서**: DHT11 (온습도), IR/초음파 센서 (거리·인원 감지)  
- **제어 장치**: PWM 기반 팬, LED, 자동문  
- **서버**: Linux C 기반 멀티스레드 소켓 서버 (pthread)  
- **클라이언트**: Bluetooth ↔ TCP 연동 클라이언트 (C, Linux)  

---

## 📝 추후 개선 사항 (Future Improvements)

- **웹/모바일 대시보드**: 관리자용 UI를 제공하여 매장 상태를 직관적으로 모니터링  
- **데이터베이스 연동**: MySQL 등과 연계하여 장기적인 데이터 통계 관리  
- **AI 분석**: 에너지 사용량 및 고객 방문 패턴을 학습해, 자동화 수준을 더욱 향상  

---

## 🎥 시연 영상


https://github.com/user-attachments/assets/48416154-a27e-4c83-a6a9-9ee65fcbecf8



https://github.com/user-attachments/assets/a9b789f6-3c63-43ff-844b-8cdf78acf3d7



https://github.com/user-attachments/assets/4926c441-ba69-4dbe-add5-2730e0e26980


